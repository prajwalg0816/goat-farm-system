<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Goat Farm Owner Dashboard</title>

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#f4f6f8;
  display:flex;
}
.sidebar{
  width:220px;
  background:#203a43;
  color:#fff;
  height:100vh;
  padding:20px;
}
.sidebar h2{text-align:center;}
.sidebar ul{list-style:none;padding:0;}
.sidebar li{
  background:#2c5364;
  padding:12px;
  margin:6px 0;
  border-radius:5px;
  cursor:pointer;
}
.sidebar li:hover{background:#3b6f82;}
.main{flex:1;padding:20px;}
.section{display:none;}
.section.active{display:block;}
.cards{display:flex;gap:20px;margin:20px 0;}
.card{
  background:#fff;
  padding:20px;
  border-radius:10px;
  width:180px;
  text-align:center;
  box-shadow:0 2px 5px rgba(0,0,0,.1);
}
.card span{font-size:26px;font-weight:bold;}
input,select,button{
  padding:8px;
  margin:5px 0;
}
button{
  background:#2c5364;
  color:#fff;
  border:none;
  cursor:pointer;
}
button:hover{background:#203a43;}
table{
  width:100%;
  margin-top:15px;
  background:#fff;
  border-collapse:collapse;
}
th,td{
  border:1px solid #ddd;
  padding:10px;
  text-align:center;
}
</style>
</head>

<body>

<!-- SIDEBAR -->
<div class="sidebar">
  <h2>üêê Goat Farm</h2>
  <ul>
    <li onclick="show('dashboard')">üìä Dashboard</li>
    <li onclick="show('goats')">üêê Goats</li>
    <li onclick="show('finance')">üí∞ Finance</li>
    <li onclick="logout()">üö™ Logout</li>
  </ul>
</div>

<!-- MAIN -->
<div class="main">

<!-- DASHBOARD -->
<div id="dashboard" class="section active">
  <h1>Owner Dashboard</h1>
  <div class="cards">
    <div class="card">Total Goats<br><span id="totalGoats">0</span></div>
    <div class="card">Income<br>‚Çπ<span id="dashIncome">0</span></div>
    <div class="card">Expense<br>‚Çπ<span id="dashExpense">0</span></div>
    <div class="card">Profit<br>‚Çπ<span id="dashProfit">0</span></div>
  </div>
</div>

<!-- GOATS -->
<div id="goats" class="section">
  <h1>Goat Records</h1>

  <h3>Add Goat</h3>
  <input id="gid" placeholder="Goat ID">
  <input id="breed" placeholder="Breed">
  <select id="gender">
    <option>Male</option>
    <option>Female</option>
  </select>
  <input id="age" placeholder="Age">
  <button onclick="addGoat()">Add Goat</button>

  <table>
    <thead>
      <tr><th>ID</th><th>Breed</th><th>Gender</th><th>Age</th><th>‚ùå</th></tr>
    </thead>
    <tbody id="goatTable"></tbody>
  </table>
</div>

<!-- FINANCE -->
<div id="finance" class="section">
  <h1>Finance</h1>

  <h3>Add Entry</h3>
  <select id="fType">
    <option value="income">Income</option>
    <option value="expense">Expense</option>
  </select>
  <input id="fCategory" placeholder="Category">
  <input id="fAmount" type="number" placeholder="Amount">
  <input id="fNote" placeholder="Note">
  <button onclick="addFinance()">Add</button>

  <h3>Summary</h3>
  <p>Income: ‚Çπ<span id="totalIncome">0</span></p>
  <p>Expense: ‚Çπ<span id="totalExpense">0</span></p>
  <h2>Profit: ‚Çπ<span id="netProfit">0</span></h2>

  <table>
    <thead>
      <tr><th>Type</th><th>Category</th><th>Amount</th><th>Note</th><th>‚ùå</th></tr>
    </thead>
    <tbody id="financeTable"></tbody>
  </table>
</div>

</div>

<!-- FIREBASE SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
// üî¥ FIREBASE CONFIG (YOUR PROJECT)
firebase.initializeApp({
  apiKey: "AIzaSyCOSeK0RonTva_lazfZV_H22sFAzd685iY",
  authDomain: "goatfarmmanagement-d7b89.firebaseapp.com",
  projectId: "goatfarmmanagement-d7b89"
});

const db = firebase.firestore();

// NAV
function show(id){
  document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}
function logout(){ location.href="index.html"; }

// ===== GOATS =====
db.collection("goats").onSnapshot(s=>{
  goatTable.innerHTML="";
  totalGoats.innerText=s.size;
  s.forEach(d=>{
    const g=d.data();
    goatTable.innerHTML+=`
    <tr>
      <td>${g.gid}</td><td>${g.breed}</td><td>${g.gender}</td><td>${g.age}</td>
      <td><button onclick="delGoat('${d.id}')">‚ùå</button></td>
    </tr>`;
  });
});
function addGoat(){
  db.collection("goats").add({
    gid:gid.value,breed:breed.value,gender:gender.value,age:age.value
  });
  gid.value=breed.value=age.value="";
}
function delGoat(id){db.collection("goats").doc(id).delete();}

// ===== FINANCE =====
db.collection("finance").onSnapshot(s=>{
  let inc=0,exp=0;
  financeTable.innerHTML="";
  s.forEach(d=>{
    const f=d.data();
    f.type=="income"?inc+=f.amount:exp+=f.amount;
    financeTable.innerHTML+=`
    <tr>
      <td>${f.type}</td><td>${f.category}</td><td>‚Çπ${f.amount}</td><td>${f.note||""}</td>
      <td><button onclick="delFin('${d.id}')">‚ùå</button></td>
    </tr>`;
  });
  totalIncome.innerText=dashIncome.innerText=inc;
  totalExpense.innerText=dashExpense.innerText=exp;
  netProfit.innerText=dashProfit.innerText=inc-exp;
});
function addFinance(){
  db.collection("finance").add({
    type:fType.value,
    category:fCategory.value,
    amount:Number(fAmount.value),
    note:fNote.value
  });
  fCategory.value=fAmount.value=fNote.value="";
}
function delFin(id){db.collection("finance").doc(id).delete();}
</script>

</body>
</html>
