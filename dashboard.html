<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>üêê Goat Farm Dashboard</title>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<style>
/* ===== BASE ===== */
body{
  font-family:"Segoe UI",Arial;
  background:linear-gradient(135deg,#fdfbfb,#ebedee);
  margin:0;
  padding:16px;
  overflow-x:hidden;
}
h2{
  color:#2c5364;
  margin-bottom:10px;
  display:flex;
  align-items:center;
  gap:10px;
}

/* ===== FLOATING GOAT ===== */
.goat-float{
  font-size:36px;
  animation:float 3s ease-in-out infinite;
}
@keyframes float{
  0%{transform:translateY(0)}
  50%{transform:translateY(-8px)}
  100%{transform:translateY(0)}
}

/* ===== GRID ===== */
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
  gap:18px;
  margin-top:14px;
}

/* ===== CARD ===== */
.card{
  background:rgba(255,255,255,0.9);
  backdrop-filter: blur(8px);
  border-radius:18px;
  padding:20px;
  box-shadow:0 12px 30px rgba(0,0,0,.08);
  text-align:center;
  animation:slideUp .7s ease forwards;
  opacity:0;
}
.card:nth-child(1){animation-delay:.1s}
.card:nth-child(2){animation-delay:.2s}
.card:nth-child(3){animation-delay:.3s}
.card:nth-child(4){animation-delay:.4s}
.card:nth-child(5){animation-delay:.5s}

@keyframes slideUp{
  from{transform:translateY(20px);opacity:0}
  to{transform:translateY(0);opacity:1}
}

.card h3{
  margin:0;
  font-size:15px;
  color:#555;
}
.icon{
  font-size:30px;
}
.num{
  font-size:34px;
  font-weight:700;
  margin-top:6px;
  color:#2c5364;
}

/* ===== COLORS ===== */
.total{border-top:5px solid #2c5364}
.male{border-top:5px solid #3498db}
.female{border-top:5px solid #e84393}
.kid{border-top:5px solid #f1c40f}
.preg{border-top:5px solid #9b59b6}

/* ===== MOBILE ===== */
@media(max-width:600px){
  h2{font-size:18px}
  .num{font-size:26px}
}
</style>
</head>

<body>

<h2>
  <span class="goat-float">üêê</span>
  Goat Farm Dashboard
</h2>

<div class="grid">

  <div class="card total">
    <div class="icon">üêê</div>
    <h3>Total Goats</h3>
    <div class="num" id="total">0</div>
  </div>

  <div class="card male">
    <div class="icon">‚ôÇÔ∏è</div>
    <h3>Male Goats</h3>
    <div class="num" id="male">0</div>
  </div>

  <div class="card female">
    <div class="icon">‚ôÄÔ∏è</div>
    <h3>Female Goats</h3>
    <div class="num" id="female">0</div>
  </div>

  <div class="card kid">
    <div class="icon">üêê‚ú®</div>
    <h3>Kids</h3>
    <div class="num" id="kids">0</div>
  </div>

  <div class="card preg">
    <div class="icon">ü§∞üêê</div>
    <h3>Pregnant</h3>
    <div class="num" id="pregnant">0</div>
  </div>

</div>

<script>
/* ===== SUPABASE CONFIG ===== */
const db = supabase.createClient(
  "https://jrrorjoxlwqanebnchui.supabase.co",
  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Impycm9yam94bHdxYW5lYm5jaHVpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg0NDk5ODMsImV4cCI6MjA4NDAyNTk4M30.KgITXQJmA9TNw6lbHW94egKOW_gW6nPK5UViDNC5l5k"
);

/* ===== COUNT-UP ANIMATION ===== */
function animateCount(id, value){
  let el = document.getElementById(id);
  let start = 0;
  let step = Math.ceil(value / 30);
  let interval = setInterval(()=>{
    start += step;
    if(start >= value){
      start = value;
      clearInterval(interval);
    }
    el.innerText = start;
  },20);
}

/* ===== LOAD DASHBOARD ===== */
async function loadDashboard(){
  const { data } = await db.from("goats").select("*");
  if(!data) return;

  let total = data.length;
  let male = 0, female = 0, kids = 0, pregnant = 0;

  data.forEach(g=>{
    if(g.gender==="Male") male++;
    if(g.gender==="Female") female++;
    if(g.life_status==="Kid") kids++;
    if(g.life_status==="Pregnant") pregnant++;
  });

  animateCount("total", total);
  animateCount("male", male);
  animateCount("female", female);
  animateCount("kids", kids);
  animateCount("pregnant", pregnant);
}

loadDashboard();
</script>

</body>
</html>

