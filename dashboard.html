<!DOCTYPE html>
<html>
<head>
<title>Dashboard </title>
<link rel="stylesheet" href="style.css">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>

<h2>ðŸ“Š Dashboard</h2>
<div id="stats"></div>

<script>
const supabase = supabase.createClient(
  "https://jrrorjoxlwqanebnchui.supabase.co",
  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Impycm9yam94bHdxYW5lYm5jaHVpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg0NDk5ODMsImV4cCI6MjA4NDAyNTk4M30.KgITXQJmA9TNw6lbHW94egKOW_gW6nPK5UViDNC5l5k"
);

async function load(){
  const {data}=await supabase.from("goats").select("*");
  let m=0,f=0,p=0,k=0;
  data.forEach(g=>{
    if(g.gender==="Male")m++;
    if(g.gender==="Female")f++;
    if(g.life_status==="Pregnant")p++;
    if(g.life_status==="Kid")k++;
  });
  stats.innerHTML=`
Total: ${data.length}<br>
Male: ${m}<br>
Female: ${f}<br>
Pregnant: ${p}<br>
Kids: ${k}`;
}
load();
</script>

</body>
</html>
